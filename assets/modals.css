/* modals.css - Modal dialog styles */

/* ===== MODAL STYLES ===== */
/* The project uses two patterns: .modal/.sheet (in markup) and
   older .modal-overlay/.modal-content. Keep both sets in sync so
   existing markup and JS work without changes. */

/* Base overlay used by .modal (covers viewport) */
.modal {
  position: fixed;
  inset: 0; /* top:0; right:0; bottom:0; left:0 */
  display: none; /* JS toggles to 'flex' when opening */
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(6px);
  z-index: 2000;
  padding: 20px;
  transition: opacity 0.22s ease, visibility 0.22s ease;
}

.modal.show,
.modal[aria-hidden="false"] {
  display: flex;
  opacity: 1;
  visibility: visible;
}

/* Backwards-compatible names (in case some code toggles these classes) */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(8px);
  z-index: 2000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.modal-overlay.active {
  opacity: 1;
  visibility: visible;
}

/* The visible panel inside the overlay. Project uses .sheet in markup; keep
   compatibility with older .modal-content naming too. */
.sheet,
.modal-content {
  background: var(--modal-bg, white);
  border-radius: 18px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.28);
  max-width: 560px;
  width: 100%;
  max-height: 92vh;
  overflow-y: auto;
  transform: scale(0.96) translateY(10px);
  transition: transform 0.22s ease, opacity 0.22s ease;
  position: relative;
  padding: 20px 24px;
}

.modal.show .sheet,
.modal-overlay.active .modal-content {
  transform: scale(1) translateY(0);
}

/* Close button inside many modals uses class .x in markup */
.sheet .x {
  position: absolute;
  top: 12px;
  right: 12px;
  background: none;
  border: none;
  font-size: 20px;
  color: var(--text-muted, #64748b);
  cursor: pointer;
  padding: 6px;
  border-radius: 8px;
}

.sheet .x:hover {
  background: rgba(0,0,0,0.04);
  color: var(--text, #334155);
}

.modal-header {
  padding: 12px 8px 8px;
  border-bottom: 1px solid #e2e8f0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-title {
  font-size: 20px;
  font-weight: 700;
  color: var(--text, #1e293b);
  margin: 0;
}

.modal-close {
  background: none;
  border: none;
  font-size: 20px;
  color: #64748b;
  cursor: pointer;
  padding: 6px;
  border-radius: 50%;
  transition: all 0.15s ease;
}

.modal-close:hover {
  background: #f1f5f9;
  color: #334155;
}

.modal-body {
  padding: 12px 8px;
}

.modal-footer {
  padding: 12px 8px 16px;
  border-top: 1px solid #e2e8f0;
  display: flex;
  gap: 10px;
  justify-content: flex-end;
}

/* Settings Modal Specific */
.settings-group {
  margin-bottom: 24px;
}

.settings-label {
  display: block;
  font-weight: 600;
  color: #374151;
  margin-bottom: 8px;
}

.settings-description {
  font-size: 14px;
  color: #6b7280;
  margin-bottom: 12px;
}

.theme-options {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 12px;
}

.theme-option {
  padding: 16px;
  border: 2px solid #e2e8f0;
  border-radius: 12px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s ease;
  background: white;
}

.theme-option:hover {
  border-color: #10b981;
  transform: translateY(-2px);
}

.theme-option.active {
  border-color: #10b981;
  background: #f0fdf4;
}

.theme-icon {
  font-size: 24px;
  margin-bottom: 8px;
  display: block;
}

.theme-name {
  font-weight: 600;
  color: #374151;
  font-size: 14px;
}

/* Leaf Status Modal */
.leaf-status-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin-bottom: 20px;
}

.status-card {
  padding: 20px;
  border-radius: 12px;
  text-align: center;
  border: 1px solid #e2e8f0;
}

.status-card.healthy {
  background: #f0fdf4;
  border-color: #22c55e;
}

.status-card.withered {
  background: #fef2f2;
  border-color: #ef4444;
}

.status-number {
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 8px;
}

.status-card.healthy .status-number {
  color: #22c55e;
}

.status-card.withered .status-number {
  color: #ef4444;
}

.status-label {
  font-weight: 600;
  color: #374151;
}

/* Dark theme support for modals */
[data-theme="dark"] .modal-content {
  background: #1e293b;
  border: 1px solid #334155;
}

[data-theme="dark"] .modal-header {
  border-color: #334155;
}

[data-theme="dark"] .modal-title {
  color: #f1f5f9;
}

[data-theme="dark"] .modal-close {
  color: #94a3b8;
}

[data-theme="dark"] .modal-close:hover {
  background: #334155;
  color: #f1f5f9;
}

[data-theme="dark"] .modal-footer {
  border-color: #334155;
}

[data-theme="dark"] .settings-label {
  color: #f1f5f9;
}

[data-theme="dark"] .settings-description {
  color: #94a3b8;
}

[data-theme="dark"] .theme-option {
  background: #334155;
  border-color: #475569;
  color: #f1f5f9;
}

[data-theme="dark"] .theme-option:hover {
  border-color: #10b981;
}

[data-theme="dark"] .theme-option.active {
  background: #065f46;
  border-color: #10b981;
}

[data-theme="dark"] .theme-name {
  color: #f1f5f9;
}

[data-theme="dark"] .status-card {
  background: #334155;
  border-color: #475569;
}

[data-theme="dark"] .status-card.healthy {
  background: #064e3b;
  border-color: #22c55e;
}

[data-theme="dark"] .status-card.withered {
  background: #7f1d1d;
  border-color: #ef4444;
}

[data-theme="dark"] .status-label {
  color: #f1f5f9;
}

/* Mobile responsive for modals */
@media (max-width: 768px) {
  /* Make the sheet fill most of the viewport width and be comfortably
     scrollable; keep rounded corners and small padding */
  .sheet,
  .modal-content {
    margin: 8px;
    max-width: calc(100vw - 16px);
    border-radius: 12px;
    padding: 12px 12px;
    max-height: 92vh;
  }

  .modal {
    align-items: center;
    justify-content: center;
    padding: 8px;
  }

  .modal-header,
  .modal-body,
  .modal-footer {
    padding-left: 12px;
    padding-right: 12px;
  }

  .theme-options {
    grid-template-columns: 1fr 1fr;
  }

  .leaf-status-grid {
    grid-template-columns: 1fr;
  }
}

/* Support modals: use a thinner, subtler scrollbar so the long text doesn't feel clunky
   and keep the scrolling inside the sheet (no outer page scrollbar). Target the
   support modal ids we added so other modals are unaffected. */
#supportModal .sheet,
#supportConnectModal .sheet,
#supportThanksModal .sheet {
  /* allow slightly more vertical space for follow-up content */
  max-height: 84vh;
  overflow-y: auto;
  scrollbar-width: thin; /* Firefox */
  -ms-overflow-style: -ms-autohiding-scrollbar; /* IE/Edge */
}

/* Webkit scrollbar tweaks for Chromium/Safari */
#supportModal .sheet::-webkit-scrollbar,
#supportConnectModal .sheet::-webkit-scrollbar,
#supportThanksModal .sheet::-webkit-scrollbar {
  width: 8px;
}
#supportModal .sheet::-webkit-scrollbar-track,
#supportConnectModal .sheet::-webkit-scrollbar-track,
#supportThanksModal .sheet::-webkit-scrollbar-track {
  background: transparent;
}
#supportModal .sheet::-webkit-scrollbar-thumb,
#supportConnectModal .sheet::-webkit-scrollbar-thumb,
#supportThanksModal .sheet::-webkit-scrollbar-thumb {
  background: rgba(0,0,0,0.12);
  border-radius: 8px;
}
#supportModal .sheet::-webkit-scrollbar-thumb:hover,
#supportConnectModal .sheet::-webkit-scrollbar-thumb:hover,
#supportThanksModal .sheet::-webkit-scrollbar-thumb:hover {
  background: rgba(0,0,0,0.18);
}

/* If the visual scrollbar is undesired, hide it for the support modals while
   preserving scrolling capability (good visual, still accessible via wheel/keys). */
#supportModal .sheet,
#supportConnectModal .sheet,
#supportThanksModal .sheet {
  /* For Firefox: none hides the thumb but keeps scrolling */
  scrollbar-width: none;
}

/* WebKit: hide scrollbar but keep scroll behavior */
#supportModal .sheet::-webkit-scrollbar,
#supportConnectModal .sheet::-webkit-scrollbar,
#supportThanksModal .sheet::-webkit-scrollbar {
  display: none;
  width: 0;
  height: 0;
}